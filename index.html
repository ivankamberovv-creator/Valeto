<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Пещера – изборът</title>

<style>
    body {
        margin: 0;
        height: 100vh;
        background: url("https://images.unsplash.com/photo-1501785888041-af3ef285b470?auto=format&fit=crop&w=1600&q=80")
            no-repeat center center/cover;
        display: flex;
        justify-content: center;
        align-items: center;
        font-family: Arial, sans-serif;
        color: white;
    }

    #game-box {
        background: rgba(0, 0, 0, 0.6);
        padding: 20px;
        border-radius: 10px;
        width: 80%;
        max-width: 600px;
        text-align: center;
    }

    button {
        margin: 8px;
        padding: 12px 20px;
        font-size: 18px;
        cursor: pointer;
        border-radius: 8px;
        background: #222;
        color: white;
        border: none;
    }

    button:hover {
        background: #444;
    }

    /* ⬇⬇⬇ АНИМАЦИЯТА НА ПРИЛЕПА */
    #bat {
        position: absolute;
        width: 120px;
        top: 20%;
        left: -150px;
        animation: fly 8s linear infinite;
        pointer-events: none;
    }

    @keyframes fly {
        0%   { left: -150px; transform: scaleX(1); }
        45%  { left: 110%; transform: scaleX(1); }
        50%  { left: 110%; transform: scaleX(-1); }
        100% { left: -150px; transform: scaleX(-1); }
    }
</style>
</head>

<body>

<img id="bat" src="https://i.imgur.com/6c5QnW4.png">

<div id="game-box">
    <p id="story">Приближавате се внимателно… Съществото ви гледа с жълти очи.</p>

    <button onclick="fight()">Бием се</button>
    <button onclick="talk()">Говорим с него</button>
    <button onclick="runAway()">Бягаме от него</button>
</div>

<script>

function setScene(text, buttons = []) {
    // сменяме текста
    document.getElementById("story").innerText = text;

    // генерираме нови бутони
    let box = document.getElementById("game-box");
    let oldButtons = box.querySelectorAll("button");
    oldButtons.forEach(b => b.remove());

    buttons.forEach(b => {
        let btn = document.createElement("button");
        btn.innerText = b.label;
        btn.onclick = b.action;
        box.appendChild(btn);
    });
}

// --- ПЪРВА СЦЕНА ---
function fight() {
    setScene(
        "Тварта се хвърля към вас! Успявате да я отблъснете. Но сега трябва да решите накъде да продължите.",
        [
            { label: "Север", action: goNorth },
            { label: "Юг", action: goSouth },
            { label: "Запад", action: goWest }
        ]
    );
}

function talk() {
    setScene(
        "Съществото накланя глава. Нещо знае… но няма да ви помогне. Пътят ви остава ваш избор.",
        [
            { label: "Север", action: goNorth },
            { label: "Юг", action: goSouth },
            { label: "Запад", action: goWest }
        ]
    );
}

function runAway() {
    setScene(
        "Побягвате! Излизате от опасността, но пътеките пред вас се разделят.",
        [
            { label: "Север", action: goNorth },
            { label: "Юг", action: goSouth },
            { label: "Запад", action: goWest }
        ]
    );
}

// --- ВТОРА СЦЕНА ---
function goNorth() {
    setScene("Тръгвате на Север. Планината се извисява пред вас, а студеният вятър носи звук на нещо древно...");
}

function goSouth() {
    setScene("Тръгвате на Юг. Пътеката става по-тясна, а някъде напред се чува течаща вода...");
}

function goWest() {
    setScene("Тръгвате на Запад. Горите се сгъстяват и сенките между дърветата започват да се движат...");
}

</script>

</script>

</body>
</html>
